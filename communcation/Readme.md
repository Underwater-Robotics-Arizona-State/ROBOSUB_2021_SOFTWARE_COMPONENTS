This is the communication code
